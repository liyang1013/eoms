<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.keboda.eomsback.stock.mapper.ImgFileMapper">

    <update id="updateQty">
        update ${centre}.img_file
        set img10 = img10 + #{img10}, img11 = img11 + #{img10}
        <where>
            img01 = #{img01} and img02 = #{img02}
            <if test="img03 != null">
                and img03 = #{img03}
            </if>
            <if test="img04 != null">
                and img04 = #{img04}
            </if>
        </where>
    </update>
    <select id="searchImgList" resultType="com.keboda.eomsback.stock.pojo.ImgFile">
        select img01,ima02,img02,img03,img04,imd02,img09,img10,img23
        from ${centre}.img_file
                 left join ${centre}.imd_file on img02 = imd01
                 left join ${centre}.ima_file on ima01 = img01
        <where>
            <if test="code_1 != null and code_1 != '' " >
                and ( img01 like '%${code_1}%' or ima02 like '%${code_1}%' )
            </if>
        </where>
        order by img01,img02
    </select>
</mapper>
